require 'spec_helper'

describe Betfair::ResponseParser do

  # Dummy class to test module
  module Betfair
    class Foo; include ResponseParser; end
  end

  before do
    @parser = Betfair::Foo.new
  end

  it "should parse login response" do
    login_xml = load_xml_response("login_ok.xml")
    parsed = @parser.login login_xml
    parsed.should == {"currency" => "GBP"}
  end

  it "should parse get_all_markets response" do
    get_all_markets_xml = load_xml_response("get_all_markets.xml")
    parsed = @parser.get_all_markets get_all_markets_xml
    parsed["market_data"].keys.size.should eq 246
    parsed["market_data"]["104968448"].should == {"id"=>"104968448", "name"=>"To Be Placed", "type"=>"O", "status"=>"ACTIVE", "date"=> Time.parse("2012-02-25 14:00:00 UTC"), "menu_path"=>"Horse RacingGBKemp 25th Feb", "event_hierarchy"=>"/7/298251/26813087/104968448", "bet_delay"=>"0", "exchange_id"=>"1", "country_code"=>"GBR", "last_refresh"=> Time.parse("2012-02-25 13:53:30 UTC"), "num_runners"=>"8", "num_winners"=>"3", "total_amount_matched"=>"33339.18", "bsp_market"=>true, "turning_in_play"=>true}
  end

  it "should parse get_market response" do
    get_market_xml = load_xml_response("get_market.xml")
    parsed = @parser.get_market get_market_xml
    parsed.should == {"id"=>"104968439", "status"=>"ACTIVE", "parent_id"=>"26813086", "country_code"=>"GBR", "event_type"=>"7", "base_rate"=>"5.0", "market_name"=>"2m Hcap Chs", "num_winners"=>"1", "market_time"=>"2012-02-25T15:45:00.000Z", "runners"=>[{"selection_id"=>"3043342", "name"=>"Arctic Ben"}, {"selection_id"=>"4493849", "name"=>"Educated Evans"}, {"selection_id"=>"2795387", "name"=>"Buffalo Bob"}, {"selection_id"=>"3687553", "name"=>"Rileyev"}, {"selection_id"=>"2610448", "name"=>"Oh Crick"}, {"selection_id"=>"2406110", "name"=>"Oscar Gogo"}, {"selection_id"=>"2446696", "name"=>"Dinarius"}, {"selection_id"=>"1381307", "name"=>"Moon Over Miami"}, {"selection_id"=>"2810086", "name"=>"Super Formen"}]}
  end

  it "should parse get_silks_v2 response" do
    get_silks_v2_xml = load_xml_response("get_silks_v2.xml")
    parsed = @parser.get_silks_v2 get_silks_v2_xml
    parsed.should == {"105668397"=>{"runners"=>{"5446714"=>{"silks_url"=>"c20120508cat/00074030.jpg", "silks_text"=>"White, dark blue triple diamond, dark blue and white diabolo on sleeves, white cap, dark blue diamond", "trainer_name"=>"Richard Whitaker", "age_weight"=>"4/9-6", "form"=>"1343-", "days_since"=>"237", "jockey_claim"=>"3", "wearing"=>"", "saddle_cloth"=>"3", "stall_draw"=>"3", "owner_name"=>"Mrs Jane Newett", "jockey_name"=>"Amy Ryan", "colour"=>"ch", "sex"=>"f", "bred"=>"GB", "forecast_price"=>"13/2", "official_rating"=>"68", "sire"=>{"name"=>"Namid", "bred"=>"UK", "year_born"=>"1996"}, "dam"=>{"name"=>"Petra Nova", "bred"=>"UK", "year_born"=>"1996"}, "dam_sire"=>{"name"=>"First Trump", "bred"=>"UK", "year_born"=>"1991"}}, "4691268"=>{"silks_url"=>"c20120508cat/00075682.jpg", "silks_text"=>"Black, pink seams, striped sleeves, pink cap", "trainer_name"=>"Ruth Carr", "age_weight"=>"4/9-5", "form"=>"468900-", "days_since"=>"165", "jockey_claim"=>"0", "wearing"=>"", "saddle_cloth"=>"4", "stall_draw"=>"9", "owner_name"=>"Paul Saxton & The Bottom Liners", "jockey_name"=>"James Sullivan", "colour"=>"b", "sex"=>"g", "bred"=>"IRE", "forecast_price"=>"12/1", "official_rating"=>"67", "sire"=>{"name"=>"Kheleyf", "bred"=>"USA", "year_born"=>"2001"}, "dam"=>{"name"=>"Diplomats Daughter", "bred"=>"UK", "year_born"=>"2001"}, "dam_sire"=>{"name"=>"Unfuwain", "bred"=>"USA", "year_born"=>"1985"}}, "2503257"=>{"silks_url"=>"c20120508cat/00077008.jpg", "silks_text"=>"Pink, emerald green triple diamond, diamonds on sleeves, emerald green cap", "trainer_name"=>"Daniel Loughnane", "age_weight"=>"7/9-7", "form"=>"372111", "days_since"=>"42", "jockey_claim"=>"0", "wearing"=>"tongue strap", "saddle_cloth"=>"1", "stall_draw"=>"5", "owner_name"=>"Mrs C. Loughnane", "jockey_name"=>"Shane Kelly", "colour"=>"b", "sex"=>"g", "bred"=>"IRE", "forecast_price"=>"7/2", "official_rating"=>"69", "sire"=>{"name"=>"Captain Rio", "bred"=>"UK", "year_born"=>"1999"}, "dam"=>{"name"=>"Queen Sigi", "bred"=>"IRE", "year_born"=>"1995"}, "dam_sire"=>{"name"=>"Fairy King", "bred"=>"USA", "year_born"=>"1982"}}, "3093005"=>{"silks_url"=>"c20120508cat/00042636.jpg", "silks_text"=>"Yellow, dark green seams, striped sleeves, yellow cap", "trainer_name"=>"Paul Green", "age_weight"=>"6/9-2", "form"=>"444U85", "days_since"=>"27", "jockey_claim"=>"0", "wearing"=>"visor", "saddle_cloth"=>"5", "stall_draw"=>"2", "owner_name"=>"Mr Paul Green (Oaklea)", "jockey_name"=>"Silvestre De Sousa", "colour"=>"b", "sex"=>"g", "bred"=>"IRE", "forecast_price"=>"10/1", "official_rating"=>"64", "sire"=>{"name"=>"Danetime", "bred"=>"IRE", "year_born"=>"1994"}, "dam"=>{"name"=>"Katherine Gorge", "bred"=>"USA", "year_born"=>"1994"}, "dam_sire"=>{"name"=>"Hansel", "bred"=>"USA", "year_born"=>"1988"}}, "4316124"=>{"silks_url"=>"c20120508cat/00004284.jpg", "silks_text"=>"White and dark green diamonds, white sleeves, dark green armlets, white cap", "trainer_name"=>"Paul Midgley", "age_weight"=>"6/8-11", "form"=>"215465", "days_since"=>"34", "jockey_claim"=>"0", "wearing"=>"", "saddle_cloth"=>"8", "stall_draw"=>"11", "owner_name"=>"Mr John Allan Milburn", "jockey_name"=>"Micky Fenton", "colour"=>"b", "sex"=>"g", "bred"=>"USA", "forecast_price"=>"9/1", "official_rating"=>"59", "sire"=>{"name"=>"Grand Slam", "bred"=>"USA", "year_born"=>"1995"}, "dam"=>{"name"=>"Ruby's Reception", "bred"=>"USA", "year_born"=>"2000"}, "dam_sire"=>{"name"=>"Rubiano", "bred"=>"USA", "year_born"=>"1987"}}, "4237300"=>{"silks_url"=>"c20120508cat/00055527.jpg", "silks_text"=>"White, brown seams, white sleeves and cap", "trainer_name"=>"Michael Easterby", "age_weight"=>"5/9-0", "form"=>"2110-01", "days_since"=>"13", "jockey_claim"=>"0", "wearing"=>"", "saddle_cloth"=>"7", "stall_draw"=>"6", "owner_name"=>"Mr A. Saha", "jockey_name"=>"Paddy Aspell", "colour"=>"b", "sex"=>"g", "bred"=>"GB", "forecast_price"=>"6/1", "official_rating"=>"62", "sire"=>{"name"=>"Danroad", "bred"=>"AUS", "year_born"=>"1999"}, "dam"=>{"name"=>"Lawless Bridget", "bred"=>"UK", "year_born"=>"1995"}, "dam_sire"=>{"name"=>"Alnasr Alwasheek", "bred"=>"UK", "year_born"=>"1989"}}, "4650680"=>{"silks_url"=>"c20120508cat/00050445.jpg", "silks_text"=>"Beige and black (quartered), halved sleeves", "trainer_name"=>"Paul Midgley", "age_weight"=>"4/8-11", "form"=>"0615-84", "days_since"=>"27", "jockey_claim"=>"0", "wearing"=>"visor", "saddle_cloth"=>"10", "stall_draw"=>"1", "owner_name"=>"Mr K. L. Man", "jockey_name"=>"Michael O'Connell", "colour"=>"br", "sex"=>"f", "bred"=>"GB", "forecast_price"=>"20/1", "official_rating"=>"59", "sire"=>{"name"=>"Pastoral Pursuits", "bred"=>"UK", "year_born"=>"2001"}, "dam"=>{"name"=>"Eljariha", "bred"=>"UK", "year_born"=>"1997"}, "dam_sire"=>{"name"=>"Unfuwain", "bred"=>"USA", "year_born"=>"1985"}}, "2091820"=>{"silks_url"=>"c20120508cat/00006693.jpg", "silks_text"=>"Light blue, dark green hoops, light blue sleeves", "trainer_name"=>"Chris Grant", "age_weight"=>"9/9-1", "form"=>"11393-0", "days_since"=>"27", "jockey_claim"=>"0", "wearing"=>"blinkers", "saddle_cloth"=>"6", "stall_draw"=>"10", "owner_name"=>"Mr Nigel E. M. Jones", "jockey_name"=>"Tony Hamilton", "colour"=>"b", "sex"=>"g", "bred"=>"IRE", "forecast_price"=>"25/1", "official_rating"=>"63", "sire"=>{"name"=>"Pivotal", "bred"=>"UK", "year_born"=>"1993"}, "dam"=>{"name"=>"My-Lorraine", "bred"=>"IRE", "year_born"=>"1994"}, "dam_sire"=>{"name"=>"Mac's Imp", "bred"=>"USA", "year_born"=>"1988"}}, "1500142"=>{"silks_url"=>"c20120508cat/00041945.jpg", "silks_text"=>"Black, orange epaulets, diamonds on sleeves", "trainer_name"=>"Paul Midgley", "age_weight"=>"8/9-6", "form"=>"90850-9", "days_since"=>"29", "jockey_claim"=>"7", "wearing"=>"visor", "saddle_cloth"=>"2", "stall_draw"=>"8", "owner_name"=>"Mr Anthony D. Copley", "jockey_name"=>"Ned Curtis", "colour"=>"ch", "sex"=>"f", "bred"=>"GB", "forecast_price"=>"16/1", "official_rating"=>"68", "sire"=>{"name"=>"Ishiguru", "bred"=>"USA", "year_born"=>"1998"}, "dam"=>{"name"=>"Statuette", "bred"=>"UK", "year_born"=>"1994"}, "dam_sire"=>{"name"=>"Statoblest", "bred"=>"UK", "year_born"=>"1986"}}, "5521912"=>{"silks_url"=>"c20120508cat/00024544.jpg", "silks_text"=>"Maroon, grey cross of lorraine", "trainer_name"=>"Christopher Wilson", "age_weight"=>"4/8-7", "form"=>"082100-", "days_since"=>"196", "jockey_claim"=>"0", "wearing"=>"", "saddle_cloth"=>"11", "stall_draw"=>"7", "owner_name"=>"Mr David Bartlett", "jockey_name"=>"Tom Eaves", "colour"=>"ch", "sex"=>"f", "bred"=>"GB", "forecast_price"=>"18/1", "official_rating"=>"55", "sire"=>{"name"=>"Blue Dakota", "bred"=>"IRE", "year_born"=>"2002"}, "dam"=>{"name"=>"Kungfu Kerry", "bred"=>"UK", "year_born"=>"1999"}, "dam_sire"=>{"name"=>"Celtic Swing", "bred"=>"UK", "year_born"=>"1992"}}}}}
  end

  it "should parse get_market_prices_compressed response" do
    compressed_prices_xml = load_xml_response("get_market_prices_compressed.xml")
    parsed = @parser.get_market_prices_compressed compressed_prices_xml
    parsed.should == {"market_id"=>"04968512", "currency"=>"GBP", "status"=>"ACTIVE", "in_play_delay"=>"0", "num_winners"=>"1", "market_info"=>"NR: (UKT) <br> 7. Philadelphus(0%,10:46)", "discount_allowed"=>"true", "market_base_rate"=>"5.0", "refresh_time"=>"1330255216701", "removed_runners"=>"Philadelphus,10.46,2.3;", "bsp_market"=>"Y", "5898478"=>{"selection_id"=>"5898478", "order_index"=>"0", "total_matched"=>"9402.08", "last_price_matched"=>"2.96", "handicap"=>"", "reduction_factor"=>"34.0", "vacant"=>"false", "asian_line_id"=>"2.0", "far_sp_price"=>"2.92", "near_sp_price"=>nil, "actual_sp_price"=>nil, "lay_prices"=>[{"odds"=>"2.96", "amount"=>"29.73", "type"=>"L", "depth"=>"1"}, {"odds"=>"2.94", "amount"=>"78.25", "type"=>"L", "depth"=>"2"}, {"odds"=>"2.92", "amount"=>"77.76", "type"=>"L", "depth"=>"3"}], "back_prices"=>[{"odds"=>"2.98", "amount"=>"36.69", "type"=>"B", "depth"=>"1"}, {"odds"=>"3.0", "amount"=>"971.78", "type"=>"B", "depth"=>"2"}, {"odds"=>"3.05", "amount"=>"57.0", "type"=>"B", "depth"=>"3"}]}, "5191694"=>{"selection_id"=>"5191694", "order_index"=>"1", "total_matched"=>"4768.0", "last_price_matched"=>"4.2", "handicap"=>"", "reduction_factor"=>"19.9", "vacant"=>"false", "asian_line_id"=>"1.24", "far_sp_price"=>"4.03", "near_sp_price"=>nil, "actual_sp_price"=>nil, "lay_prices"=>[{"odds"=>"4.1", "amount"=>"90.02", "type"=>"L", "depth"=>"1"}, {"odds"=>"4.0", "amount"=>"187.18", "type"=>"L", "depth"=>"2"}, {"odds"=>"3.95", "amount"=>"10.0", "type"=>"L", "depth"=>"3"}], "back_prices"=>[{"odds"=>"4.2", "amount"=>"80.89", "type"=>"B", "depth"=>"1"}, {"odds"=>"4.3", "amount"=>"153.9", "type"=>"B", "depth"=>"2"}, {"odds"=>"4.4", "amount"=>"181.81", "type"=>"B", "depth"=>"3"}]}, "5678817"=>{"selection_id"=>"5678817", "order_index"=>"2", "total_matched"=>"2631.92", "last_price_matched"=>"5.4", "handicap"=>"", "reduction_factor"=>"19.6", "vacant"=>"false", "asian_line_id"=>"2.96", "far_sp_price"=>"5.3", "near_sp_price"=>nil, "actual_sp_price"=>nil, "lay_prices"=>[{"odds"=>"5.3", "amount"=>"33.08", "type"=>"L", "depth"=>"1"}, {"odds"=>"5.2", "amount"=>"5.96", "type"=>"L", "depth"=>"2"}, {"odds"=>"5.1", "amount"=>"20.46", "type"=>"L", "depth"=>"3"}], "back_prices"=>[{"odds"=>"5.4", "amount"=>"16.51", "type"=>"B", "depth"=>"1"}, {"odds"=>"5.5", "amount"=>"16.24", "type"=>"B", "depth"=>"2"}, {"odds"=>"5.6", "amount"=>"2.0", "type"=>"B", "depth"=>"3"}]}, "5921135"=>{"selection_id"=>"5921135", "order_index"=>"3", "total_matched"=>"1855.28", "last_price_matched"=>"8.4", "handicap"=>"", "reduction_factor"=>"11.8", "vacant"=>"false", "asian_line_id"=>"1.6", "far_sp_price"=>"7.8", "near_sp_price"=>nil, "actual_sp_price"=>nil, "lay_prices"=>[{"odds"=>"8.2", "amount"=>"3.39", "type"=>"L", "depth"=>"1"}, {"odds"=>"8.0", "amount"=>"44.03", "type"=>"L", "depth"=>"2"}, {"odds"=>"7.8", "amount"=>"6.0", "type"=>"L", "depth"=>"3"}], "back_prices"=>[{"odds"=>"8.6", "amount"=>"28.78", "type"=>"B", "depth"=>"1"}, {"odds"=>"8.8", "amount"=>"24.0", "type"=>"B", "depth"=>"2"}, {"odds"=>"9.0", "amount"=>"2.0", "type"=>"B", "depth"=>"3"}]}, "4509182"=>{"selection_id"=>"4509182", "order_index"=>"4", "total_matched"=>"664.54", "last_price_matched"=>"18.0", "handicap"=>"", "reduction_factor"=>"6.9", "vacant"=>"false", "asian_line_id"=>"1.86", "far_sp_price"=>"13.75", "near_sp_price"=>nil, "actual_sp_price"=>nil, "lay_prices"=>[{"odds"=>"17.5", "amount"=>"9.36", "type"=>"L", "depth"=>"1"}, {"odds"=>"15.5", "amount"=>"7.97", "type"=>"L", "depth"=>"2"}, {"odds"=>"14.0", "amount"=>"15.19", "type"=>"L", "depth"=>"3"}], "back_prices"=>[{"odds"=>"18.0", "amount"=>"3.52", "type"=>"B", "depth"=>"1"}, {"odds"=>"18.5", "amount"=>"22.0", "type"=>"B", "depth"=>"2"}, {"odds"=>"19.0", "amount"=>"8.0", "type"=>"B", "depth"=>"3"}]}, "4801791"=>{"selection_id"=>"4801791", "order_index"=>"5", "total_matched"=>"587.64", "last_price_matched"=>"23.0", "handicap"=>"", "reduction_factor"=>"5.2", "vacant"=>"false", "asian_line_id"=>"1.82", "far_sp_price"=>"17.1", "near_sp_price"=>nil, "actual_sp_price"=>nil, "lay_prices"=>[{"odds"=>"22.0", "amount"=>"7.44", "type"=>"L", "depth"=>"1"}, {"odds"=>"21.0", "amount"=>"7.6", "type"=>"L", "depth"=>"2"}, {"odds"=>"18.5", "amount"=>"5.08", "type"=>"L", "depth"=>"3"}], "back_prices"=>[{"odds"=>"23.0", "amount"=>"3.17", "type"=>"B", "depth"=>"1"}, {"odds"=>"24.0", "amount"=>"4.53", "type"=>"B", "depth"=>"2"}, {"odds"=>"25.0", "amount"=>"6.0", "type"=>"B", "depth"=>"3"}]}, "2803150"=>{"selection_id"=>"2803150", "order_index"=>"6", "total_matched"=>"334.38", "last_price_matched"=>"55.0", "handicap"=>"", "reduction_factor"=>"2.3", "vacant"=>"false", "asian_line_id"=>"8.12", "far_sp_price"=>"46.41", "near_sp_price"=>nil, "actual_sp_price"=>nil, "lay_prices"=>[{"odds"=>"46.0", "amount"=>"10.46", "type"=>"L", "depth"=>"1"}, {"odds"=>"44.0", "amount"=>"53.83", "type"=>"L", "depth"=>"2"}, {"odds"=>"42.0", "amount"=>"6.5", "type"=>"L", "depth"=>"3"}], "back_prices"=>[{"odds"=>"55.0", "amount"=>"8.13", "type"=>"B", "depth"=>"1"}, {"odds"=>"100.0", "amount"=>"3.08", "type"=>"B", "depth"=>"2"}, {"odds"=>"660.0", "amount"=>"5.0", "type"=>"B", "depth"=>"3"}]}, "6084518"=>{"selection_id"=>"6084518", "order_index"=>"7", "total_matched"=>"14.48", "last_price_matched"=>"410.0", "handicap"=>"", "reduction_factor"=>"0.5", "vacant"=>"false", "asian_line_id"=>"29.74", "far_sp_price"=>"332.98", "near_sp_price"=>nil, "actual_sp_price"=>nil, "lay_prices"=>[{"odds"=>"320.0", "amount"=>"5.93", "type"=>"L", "depth"=>"1"}, {"odds"=>"310.0", "amount"=>"21.0", "type"=>"L", "depth"=>"2"}, {"odds"=>"300.0", "amount"=>"37.01", "type"=>"L", "depth"=>"3"}], "back_prices"=>[{"odds"=>"790.0", "amount"=>"6.0", "type"=>"B", "depth"=>"1"}, {"odds"=>"900.0", "amount"=>"13.0", "type"=>"B", "depth"=>"2"}, {"odds"=>"990.0", "amount"=>"2.0", "type"=>"B", "depth"=>"3"}]}}
  end

  it "should parse get_market_traded_volume_compressed response" do
    compressed_traded_volumes_xml = load_xml_response("get_market_traded_volume_compressed.xml")
    parsed = @parser.get_market_traded_volume_compressed compressed_traded_volumes_xml
    parsed.should == {"2803150"=>{"traded_amounts"=>[{"odds"=>"25.0", "total_matched"=>"2.08"}, {"odds"=>"26.0", "total_matched"=>"3.92"}, {"odds"=>"28.0", "total_matched"=>"4.6"}, {"odds"=>"29.0", "total_matched"=>"3.7"}, {"odds"=>"34.0", "total_matched"=>"18.16"}, {"odds"=>"36.0", "total_matched"=>"0.08"}, {"odds"=>"38.0", "total_matched"=>"58.06"}, {"odds"=>"40.0", "total_matched"=>"27.74"}, {"odds"=>"42.0", "total_matched"=>"12.38"}, {"odds"=>"44.0", "total_matched"=>"63.26"}, {"odds"=>"46.0", "total_matched"=>"55.7"}, {"odds"=>"48.0", "total_matched"=>"29.38"}, {"odds"=>"50.0", "total_matched"=>"37.2"}, {"odds"=>"55.0", "total_matched"=>"17.92"}, {"odds"=>"130.0", "total_matched"=>"0.18"}], "selection_id"=>"2803150", "asian_line_id"=>"0", "bsp"=>"0.0", "total_bsp_back_matched"=>"0.0", "total_bsp_liability_matched"=>"0.0"}, "4801791"=>{"traded_amounts"=>[{"odds"=>"14.5", "total_matched"=>"10.0"}, {"odds"=>"15.0", "total_matched"=>"14.0"}, {"odds"=>"15.5", "total_matched"=>"33.52"}, {"odds"=>"16.0", "total_matched"=>"23.4"}, {"odds"=>"16.5", "total_matched"=>"47.32"}, {"odds"=>"17.0", "total_matched"=>"42.54"}, {"odds"=>"17.5", "total_matched"=>"18.68"}, {"odds"=>"18.0", "total_matched"=>"31.92"}, {"odds"=>"18.5", "total_matched"=>"30.9"}, {"odds"=>"19.0", "total_matched"=>"45.8"}, {"odds"=>"19.5", "total_matched"=>"59.76"}, {"odds"=>"20.0", "total_matched"=>"137.54"}, {"odds"=>"21.0", "total_matched"=>"10.44"}, {"odds"=>"22.0", "total_matched"=>"31.64"}, {"odds"=>"23.0", "total_matched"=>"30.4"}, {"odds"=>"24.0", "total_matched"=>"4.48"}, {"odds"=>"25.0", "total_matched"=>"15.26"}], "selection_id"=>"4801791", "asian_line_id"=>"0", "bsp"=>"0.0", "total_bsp_back_matched"=>"0.0", "total_bsp_liability_matched"=>"0.0"}, "5921135"=>{"traded_amounts"=>[{"odds"=>"7.8", "total_matched"=>"152.1"}, {"odds"=>"8.0", "total_matched"=>"116.08"}, {"odds"=>"8.2", "total_matched"=>"183.2"}, {"odds"=>"8.4", "total_matched"=>"262.64"}, {"odds"=>"8.6", "total_matched"=>"267.02"}, {"odds"=>"8.8", "total_matched"=>"276.68"}, {"odds"=>"9.0", "total_matched"=>"248.56"}, {"odds"=>"9.2", "total_matched"=>"172.56"}, {"odds"=>"9.4", "total_matched"=>"67.08"}, {"odds"=>"9.6", "total_matched"=>"109.36"}], "selection_id"=>"5921135", "asian_line_id"=>"0", "bsp"=>"0.0", "total_bsp_back_matched"=>"0.0", "total_bsp_liability_matched"=>"0.0"}, "5191694"=>{"traded_amounts"=>[{"odds"=>"3.95", "total_matched"=>"44.0"}, {"odds"=>"4.0", "total_matched"=>"94.58"}, {"odds"=>"4.1", "total_matched"=>"633.6"}, {"odds"=>"4.2", "total_matched"=>"820.24"}, {"odds"=>"4.3", "total_matched"=>"115.88"}, {"odds"=>"4.4", "total_matched"=>"317.12"}, {"odds"=>"4.5", "total_matched"=>"108.34"}, {"odds"=>"4.6", "total_matched"=>"102.42"}, {"odds"=>"4.7", "total_matched"=>"197.98"}, {"odds"=>"4.8", "total_matched"=>"197.06"}, {"odds"=>"4.9", "total_matched"=>"166.64"}, {"odds"=>"5.0", "total_matched"=>"417.08"}, {"odds"=>"5.1", "total_matched"=>"339.68"}, {"odds"=>"5.2", "total_matched"=>"596.3"}, {"odds"=>"5.3", "total_matched"=>"259.34"}, {"odds"=>"5.4", "total_matched"=>"251.12"}, {"odds"=>"5.5", "total_matched"=>"75.04"}, {"odds"=>"5.6", "total_matched"=>"4.52"}, {"odds"=>"5.7", "total_matched"=>"15.8"}, {"odds"=>"5.8", "total_matched"=>"11.28"}], "selection_id"=>"5191694", "asian_line_id"=>"0", "bsp"=>"0.0", "total_bsp_back_matched"=>"0.0", "total_bsp_liability_matched"=>"0.0"}, "5898478"=>{"traded_amounts"=>[{"odds"=>"2.4", "total_matched"=>"0.24"}, {"odds"=>"2.42", "total_matched"=>"3.76"}, {"odds"=>"2.68", "total_matched"=>"2.24"}, {"odds"=>"2.7", "total_matched"=>"3.76"}, {"odds"=>"2.72", "total_matched"=>"7.1"}, {"odds"=>"2.74", "total_matched"=>"59.84"}, {"odds"=>"2.78", "total_matched"=>"8.74"}, {"odds"=>"2.8", "total_matched"=>"3.76"}, {"odds"=>"2.82", "total_matched"=>"0.9"}, {"odds"=>"2.84", "total_matched"=>"30.24"}, {"odds"=>"2.86", "total_matched"=>"149.84"}, {"odds"=>"2.88", "total_matched"=>"739.78"}, {"odds"=>"2.9", "total_matched"=>"936.66"}, {"odds"=>"2.92", "total_matched"=>"988.0"}, {"odds"=>"2.94", "total_matched"=>"1422.04"}, {"odds"=>"2.96", "total_matched"=>"1116.78"}, {"odds"=>"2.98", "total_matched"=>"1292.38"}, {"odds"=>"3.0", "total_matched"=>"748.78"}, {"odds"=>"3.05", "total_matched"=>"290.82"}, {"odds"=>"3.1", "total_matched"=>"227.16"}, {"odds"=>"3.15", "total_matched"=>"379.42"}, {"odds"=>"3.2", "total_matched"=>"226.4"}, {"odds"=>"3.25", "total_matched"=>"228.26"}, {"odds"=>"3.3", "total_matched"=>"155.94"}, {"odds"=>"3.35", "total_matched"=>"183.44"}, {"odds"=>"3.4", "total_matched"=>"81.18"}, {"odds"=>"3.5", "total_matched"=>"80.0"}, {"odds"=>"3.55", "total_matched"=>"18.4"}, {"odds"=>"3.6", "total_matched"=>"12.16"}, {"odds"=>"3.65", "total_matched"=>"3.98"}], "selection_id"=>"5898478", "asian_line_id"=>"0", "bsp"=>"0.0", "total_bsp_back_matched"=>"0.0", "total_bsp_liability_matched"=>"0.0"}, "6084518"=>{"traded_amounts"=>[{"odds"=>"250.0", "total_matched"=>"0.02"}, {"odds"=>"280.0", "total_matched"=>"3.4"}, {"odds"=>"290.0", "total_matched"=>"0.6"}, {"odds"=>"300.0", "total_matched"=>"7.64"}, {"odds"=>"310.0", "total_matched"=>"0.84"}, {"odds"=>"370.0", "total_matched"=>"1.0"}, {"odds"=>"410.0", "total_matched"=>"0.94"}, {"odds"=>"490.0", "total_matched"=>"0.02"}, {"odds"=>"530.0", "total_matched"=>"0.04"}], "selection_id"=>"6084518", "asian_line_id"=>"0", "bsp"=>"0.0", "total_bsp_back_matched"=>"0.0", "total_bsp_liability_matched"=>"0.0"}, "5678817"=>{"traded_amounts"=>[{"odds"=>"3.35", "total_matched"=>"4.0"}, {"odds"=>"4.2", "total_matched"=>"18.38"}, {"odds"=>"4.3", "total_matched"=>"78.84"}, {"odds"=>"4.4", "total_matched"=>"26.2"}, {"odds"=>"4.5", "total_matched"=>"192.0"}, {"odds"=>"4.6", "total_matched"=>"232.42"}, {"odds"=>"4.7", "total_matched"=>"217.52"}, {"odds"=>"4.8", "total_matched"=>"277.98"}, {"odds"=>"4.9", "total_matched"=>"496.04"}, {"odds"=>"5.0", "total_matched"=>"361.86"}, {"odds"=>"5.1", "total_matched"=>"377.16"}, {"odds"=>"5.2", "total_matched"=>"234.08"}, {"odds"=>"5.3", "total_matched"=>"62.48"}, {"odds"=>"5.4", "total_matched"=>"52.98"}], "selection_id"=>"5678817", "asian_line_id"=>"0", "bsp"=>"0.0", "total_bsp_back_matched"=>"0.0", "total_bsp_liability_matched"=>"0.0"}, "4509182"=>{"traded_amounts"=>[{"odds"=>"13.5", "total_matched"=>"11.2"}, {"odds"=>"14.0", "total_matched"=>"11.32"}, {"odds"=>"14.5", "total_matched"=>"38.04"}, {"odds"=>"15.0", "total_matched"=>"143.94"}, {"odds"=>"15.5", "total_matched"=>"157.56"}, {"odds"=>"16.0", "total_matched"=>"68.22"}, {"odds"=>"16.5", "total_matched"=>"56.04"}, {"odds"=>"17.0", "total_matched"=>"64.54"}, {"odds"=>"17.5", "total_matched"=>"59.76"}, {"odds"=>"18.0", "total_matched"=>"40.6"}, {"odds"=>"19.5", "total_matched"=>"3.34"}, {"odds"=>"20.0", "total_matched"=>"6.24"}, {"odds"=>"21.0", "total_matched"=>"3.76"}], "selection_id"=>"4509182", "asian_line_id"=>"0", "bsp"=>"0.0", "total_bsp_back_matched"=>"0.0", "total_bsp_liability_matched"=>"0.0"}}
  end

end